Overview
===========

PHP Client Library interface for communication with E-ComProcessing's Payment Processing Gateway - Genesis. You can use this library to integrate your current system with Genesis Payment Gateway. Its highly recommended to checkout "Genesis Payment Gateway API Documentation" first, to get an overview of Genesis's Payment Gateway API and functionality.

Requirements
------------

* PHP version > 5.3.0
* Composer

Installation
------------

* clone this repo / download the archive
````bash
git clone http://github.com/E-ComProcessing/genesis_php genesis_php && cd genesis_php
````

* install [Composer]
````bash
curl -sS https://getcomposer.org/installer | php
````

* fetch all required packages
````bash
php composer.phar install
````

* optionally, you may run: ````vendor/bin/phpspec run````, in order to ensure everything is working as intended

* optionally, update the credentials needed to access Genesis inside ```settings_sample.ini``` and place it in a safe, non web-accessible, directory


Example
------

````php
<?php
require 'vendor/autoload.php';

// init/ Work inside the Genesis Workspace
use \Genesis;

// load the pre-configured ini file
Config::loadSettings('/path/to/config.ini');

// optionally you can set each of the credentials manually
Config::setToken('<enter_your_token>');
Config::setUsername('<enter_your_username>');
Config::setPassword('<enter_your_password>');
Config::setEnvironment('sandbox|production');

// create a new Genesis instance with desired API request
$genesis = new \Genesis\Genesis('Financial\Cards\Authorize');

// set request parameters
$genesis
    ->request()
        ->setTransactionId('43671')
        ->setUsage('40208 concert tickets')
        ->setRemoteIp('245.253.2.12')
        ->setAmount('50')
        ->setCurrency('USD')
        // Customer Details
        ->setCustomerEmail('emil@example.com')
        ->setCustomerPhone('1987987987987')
        // Credit Card Details
        ->setCardHolder('Emil Example')
        ->setCardNumber('4200000000000000')
        ->setExpirationMonth('01')
        ->setExpirationYear('2020')
        ->setCvv('123')
        // Billing/Invoice Details
        ->setBillingFirstName('Travis')
        ->setBillingLastName('Pastrana')
        ->setBillingAddress1('Muster Str. 12')
        ->setBillingZipCode('10178')
        ->setBillingCity('Los Angeles')
        ->setBillingState('CA')
        ->setBillingCountry('US');

try {
    // send the request
    $genesis->execute();
    
    // Display the transaction Id
    // This means that the transaction is completed and it is successful
    echo $genesis->response()->getResponseObject()->unique_id;
}
catch (\Genesis\Exceptions\APIError $api) {
    // Handle API errors
    echo $genesis->response()->getResponseObject()->technical_message;
}
catch (\Genesis\Exceptions\InvalidResponse $response) {
    // Log invalid responses
    // Invalid document types, names etc.
    error_log($response->getMessage());
}
catch (\Genesis\Exceptions\NetworkError $network) {
    // Log something that happend during transport
    // SSL errors, etc.
    error_log($network->getMessage());
}


?>
````

Note: the file ```vendor/autoload.php``` is located inside the directory where you cloned the repo and it is auto-generated by [Composer]. If the file is missing, just run ```php composer.phar update``` inside the cloned directory


Request types
-------------

You can use the following request types to initialize the Genesis interface:

````
Financial\Capture
Financial\Refund
Financial\Void

Financial\Alternatives\CashU
Financial\Alternatives\PPRO
Financial\Alternatives\Paysafecard
Financial\Alternatives\Sofort
Financial\Alternatives\SofortiDEAL
Financial\BankTransfers\PayByVoucher

Financial\Cards\Authorize
Financial\Cards\Authorize3D
Financial\Cards\Credit
Financial\Cards\Payout
Financial\Cards\Recurring
Financial\Cards\Recurring\InitRecurringSale
Financial\Cards\Recurring\InitRecurringSale3D
Financial\Cards\Recurring\RecurringSale
Financial\Cards\Sale
Financial\Cards\Sale3D

Financial\Wallets\eZeeWallet

NonFinancial\AVS
NonFinancial\AccountVerification
NonFinancial\Blacklist

NonFinancial\Fraud\Chargeback\DateRange
NonFinancial\Fraud\Chargeback\Transaction
NonFinancial\Fraud\Retrieval\DateRange
NonFinancial\Fraud\Retrieval\Transaction

NonFinancial\Reconcile\DateRange
NonFinancial\Reconcile\Transaction


WPF\Create
WPF\Reconcile
````

More information about each one of the request types can be found in the Genesis API Documentation and the Wiki

API Examples
------------

You can explore Genesis's API, test parameters or get examples for different transaction types with: [Genesis Client Integration]


[Composer]: https://getcomposer.org/
[Genesis Client Integration]: https://github.com/E-ComProcessing/genesis_api_examples