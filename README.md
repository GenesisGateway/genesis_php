genesis_php
===========

Genesis PHP client library interface for communication with E-Comprocessing's Payment Processing Gateway - Genesis. You can use this library to integrate your current system with Genesis Payment Gateway. Its highly recommended to checkout "Genesis Payment Gateway API Documentation" first, to get a detailed overview of Genesis's Payment Gateway.

Requirements
------------

* PHP version >= 5.3 (however since 5.3 is EoL, we recommend at least PHP v5.4)
* PHP with libxml
* PHP ext: cURL (optionally you can use StreamContext)
* Composer

Installation
------------

* clone this repo / download the archive
````bash
git clone https://github.com/<genesis_php> genesis_php && cd genesis_php
````

* install [Composer]
````bash
curl -sS https://getcomposer.org/installer | php
````

* fetch all required packages
````bash
php composer.phar install
````

* optionally, you may run: ````vendor/bin/phpspec run````, in order to ensure everything is working as intended

* optionally, update the credentials needed to access Genesis inside ```settings_sample.ini``` and place it in a safe, non www-accessible directory

Usage
-----

In order to investigate Genesis's API, test parameters or check out basic examples, you can go to: [Genesis Client Integration]

[Composer]: https://getcomposer.org/
[Genesis Client Integration]: https://github.com/<client_integration>

Example
------

````php
<?php
require 'vendor/autoload.php';

// this namespace assignments are arbitrary
use \Genesis\Base as Genesis;
use \Genesis\Config as GenesisConfig;

// load the pre-configured ini file
GenesisConfig::loadSettings('<path-to-your-ini-file>');

// optionally you can set each of the credentials manually
GenesisConfig::setToken('<enter_your_token>');
GenesisConfig::setUsername('<enter_your_username>');
GenesisConfig::setPassword('<enter_your_password>');

// create a new Genesis instance with desired API request
$genesis = new Genesis('Financial\Recurring\RecurringSale');

// set request parameters
$genesis->request()
            ->setTransactionId('<transaction_id>')
            ->setUsage('<usage>')
            ->setRemoteIp('<remote_ip>')
            ->setReferenceId('<reference_id>')
            ->setAmount('<amount>')
            ->setCurrency('<currency>');
            
// send the request
$genesis->sendRequest();

// check if our request is successful
if ($genesis->response()->isSuccessful()) {
    echo 'OK';
} else {
    echo 'NOK';
}
?>
````

Note: the file ```vendor/autoload.php``` is located inside the directory where you cloned the repo and it is auto-generated by [Composer]. If the file is missing, just run ```php composer.phar update``` inside the cloned directory


Request types
-------------

You can use the following request types to initialize the Genesis interface:

````
Financial\Authorize
Financial\Authorize3D
Financial\Capture
Financial\Credit
Financial\Payout
Financial\Refund
Financial\Sale
Financial\Sale3D
Financial\Void

Financial\Recurring\InitRecurringSale
Financial\Recurring\InitRecurringSale3D
Financial\Recurring\RecurringSale

FraudRelated\Chargeback\DateRange
FraudRelated\Chargeback\Transaction

FraudRelated\Retrieval\DateRange
FraudRelated\Retrieval\Transaction

FraudRelated\Blacklist

NonFinancial\AccountVerification
NonFinancial\AVS

Reconcile\DateRange
Reconcile\Transaction

WPF\Create
WPF\Reconcile
````

More information about each one of the request types can be found in the Genesis API Documentation and the Wiki
